**------------------------------------------------------------------------------------------------
* @header_start
* WebGrab+Plus ini for grabbing EPG data from TvGuide websites
* @Site: mts.rs
* @MinSWversion: V5.0
* @Revision 6 - [19/03/2024] Blackbear199
* - showsplit,chanel creation fix
* @Revision 5 - [19/04/2023] Blackbear199
* - rewrite
* @Revision 4 - [13/02/2021] WG Team*  
* @Revision 3 - [12/03/2020] WG Team*  
* @Revision 2 - [08/12/2019] WG Team*  
* @Revision 1 - [09/08/2019] WG Team*
* @Revision 0 - [16/01/2019] WG Team*kvanc*  
* Creation 
* @Remarks: 
* @header_end
**------------------------------------------------------------------------------------------------
site {url=mts.rs|timezone=Europe/Belgrade|maxdays=7|cultureinfo=sr|charset=UTF-8|titlematchfactor=90|keepindexpage}
site {ratingsystem=RS|episodesystem=onscreen}
*
url_index                    {url|https://mts.rs/hybris/ecommerce/b2c/v1/products/search?sort=pozicija-rastuce&searchQueryContext=CHANNEL_PROGRAM&query=:pozicija-rastuce:channelProgramDates:|urldate|&pageSize=10000}
url_index.headers            {customheader=Accept-Encoding=gzip,deflate,br}
*
urldate.format               {datestring|yyyy-MM-dd}
*
global_temp_1.modify         {set(scope=urlindex)|'config_site_id'}
*
index_urlchannellogo.scrub  {single|{"code":"'global_temp_1'","name":|"PRIMARY","url":"|"|}}
*
index_showsplit.scrub        {regex||\{"code":"'global_temp_1'","name":"[^"]*",.*?"programs":\[(.*?)\]||}
scope.range                  {(splitindex)|end}
index_showsplit.modify       {replace(type=regex)|"\}(,)\{"|\|}
index_temp_1.modify          {substring(type=regex)|'index_showsplit' "\"start\":\"([^\"]*)"}
index_temp_1.modify          {cleanup(removeduplicates link="index_showsplit")}
*index_showsplit.modify      {(debug)}
end_scope
*
index_start.scrub            {single(separator="+" include=first)|"start":"||"|"}
index_stop.scrub             {single(separator="+" include=first)|"end":"||"|"}
index_title.scrub            {regex||"title":"(.*?)"(?:\}\|,")||}
index_description.scrub      {single|"description":"||","|","}
index_category.scrub         {single|"category":"||",|",}
index_showicon.scrub         {single|"picture":{"url":"||"|"}
**  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _  _
**      #####  CHANNEL FILE CREATION (only to create the xxx-channel.xml file)
**
** @auto_xml_channel_start
*index_site_id.scrub     {regex||\{"code":"([^"]*)","name":"[^"]*",||}
*index_site_channel.scrub{regex||\{"code":"[^"]*","name":"([^"]*)",||}
*index_site_channel.modify {replace|'| }
*index_site_id.modify    {cleanup(removeduplicates link="index_site_channel")}
** @auto_xml_channel_end
